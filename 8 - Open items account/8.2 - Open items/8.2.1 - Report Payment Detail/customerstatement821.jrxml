<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.17.0.final utlizzo versione della libreria JasperReports6.17.0-6d93193241dd8cc42629e188b94f9e0bc5722efd  -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="821" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="0" bottomMargin="0" uuid="c72e3d6c-cc75-4776-bb64-c961cd99edd3">
	<property name="com.jaspersoft.studio.data.sql.tables" value=""/>
	<property name="com.jaspersoft.studio.property.dataset.dialog.DatasetDialog.sash.w1" value="411"/>
	<property name="com.jaspersoft.studio.property.dataset.dialog.DatasetDialog.sash.w2" value="579"/>
	<property name="com.jaspersoft.studio.data.sql.SQLQueryDesigner.sash.w1" value="123"/>
	<property name="com.jaspersoft.studio.data.sql.SQLQueryDesigner.sash.w2" value="872"/>
	<property name="com.jaspersoft.studio.unit." value="pixel"/>
	<property name="com.jaspersoft.studio.unit.pageHeight" value="mm"/>
	<property name="com.jaspersoft.studio.unit.pageWidth" value="mm"/>
	<property name="com.jaspersoft.studio.unit.topMargin" value="mm"/>
	<property name="com.jaspersoft.studio.unit.bottomMargin" value="mm"/>
	<property name="com.jaspersoft.studio.unit.leftMargin" value="mm"/>
	<property name="com.jaspersoft.studio.unit.rightMargin" value="mm"/>
	<property name="com.jaspersoft.studio.unit.columnWidth" value="pixel"/>
	<property name="com.jaspersoft.studio.unit.columnSpacing" value="pixel"/>
	<property name="com.jaspersoft.studio.data.defaultdataadapter" value="idempieredb-report-dev"/>
	<style name="Header" mode="Opaque" backcolor="#D9D9D9"/>
	<style name="EasyRead">
		<conditionalStyle>
			<conditionExpression><![CDATA[$V{REPORT_COUNT}%2==1]]></conditionExpression>
			<style mode="Opaque" backcolor="#EEEEEE"/>
		</conditionalStyle>
	</style>
	<parameter name="C_BPartner_ID" class="java.lang.Integer"/>
	<parameter name="DateAcctFrom" class="java.util.Date"/>
	<parameter name="DateAcctTo" class="java.util.Date">
		<defaultValueExpression><![CDATA[new Date()]]></defaultValueExpression>
	</parameter>
	<parameter name="TOTALS" class="java.util.HashMap" isForPrompting="false"/>
	<parameter name="AD_CLIENT_ID" class="java.lang.Integer"/>
	<parameter name="AD_Org_ID" class="java.lang.Integer"/>
	<parameter name="image_file_name" class="java.lang.String" isForPrompting="false"/>
	<parameter name="RESOURCE_DIR" class="java.lang.String" isForPrompting="false">
		<parameterDescription><![CDATA[]]></parameterDescription>
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="AD_LANGUAGE" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA[$P{AD_LANGUAGE}]]></defaultValueExpression>
	</parameter>
	<parameter name="SUBREPORT_DIR" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["./"]]></defaultValueExpression>
	</parameter>
	<parameter name="RESOURCE" class="java.util.PropertyResourceBundle" isForPrompting="false"/>
	<parameter name="RECORD_ID" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="IsCustomer" class="java.lang.String"/>
	<parameter name="IsVendor" class="java.lang.String"/>
	<parameter name="IsSOTrx" class="java.lang.String"/>
	<parameter name="LOCALE_CODE" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA[$P{REPORT_LOCALE}.toString()]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select x.*,
(
	select
		coalesce(datepattern, 'yyyy-MM-dd')
	from
		ad_language
	where
		ad_language = $P{LOCALE_CODE})as datepattern,
	(
	select
		coalesce(timepattern, 'HH:mm:ss')
	from
		ad_language
	where
		ad_language = $P{LOCALE_CODE})as timepattern,
	lit_adorg_header_portrait_image($P{AD_CLIENT_ID}, $P{AD_Org_ID}) as header_image,
	lit_adorg_footer_portrait_image($P{AD_CLIENT_ID}, $P{AD_Org_ID}) as footer_image
from (
select 
(select (
	select (
		select coalesce ( sum (
	case when i.issotrx='N' then 
	invoiceopentodate2(i.c_invoice_id,ps.c_invoicepayschedule_id, $P{DateAcctFrom} )*-1
    else 
	invoiceopentodate2(i.c_invoice_id,ps.c_invoicepayschedule_id, $P{DateAcctFrom} ) END),0) as Openamt
from C_INVOICE I 
left join c_invoicepayschedule ps on i.c_invoice_id=ps.c_invoice_id
where i.c_bpartner_id= $P{C_BPartner_ID}  and DATEINVOICED <  $P{DateAcctFrom}  )+
           (Select (
              (select COALESCE(SUM(par.PAYAMT) + SUM(par.discountamt),0) as ARPayments
	      from C_PAYMENT  par, C_DOCTYPE doc  where doc.NAME ='AR Receipt'
              AND par.DOCSTATUS IN ('CO','CL')
	      AND  par.C_BPARTNER_ID =$P{C_BPartner_ID} AND par.C_DOCTYPE_ID=doc.C_DOCTYPE_ID
	      AND par.DATETRX < $P{DateAcctFrom} and par.isallocated='N' )
              ) as Payments)
     ) )as OpenningBal,
inv.ad_org_id as ad_org_id,
inv.DATEINVOICED as DateTrx ,
inv.DOCUMENTNO,
inv.issotrx,
Case WHEN (COALESCE(pay.datetrx, hdr.datetrx)  >=   $P{DateAcctFrom} and inv.DATEINVOICED < $P{DateAcctFrom}  and payamt is null) then 'prepaid' ELSE coalesce(doctrl.NAME, doc.name) END as name,
bpl.phone,
bpl.phone2,
bpl.fax,
bpl.email,
l.address1,
l.address2,
l.city,
bp.c_bpartner_id,
bp.NAME as "BPARTNER",
bp."ad_language"as ad_language,
l.postal,
l.postal_add,
doc.docbasetype,
inv.DESCRIPTION,
CASE 
 WHEN (COALESCE(pay.datetrx, hdr.datetrx)  >=   $P{DateAcctFrom} and DATEINVOICED <  $P{DateAcctFrom} and payamt is null) then 0
WHEN doc.docbasetype IN ('ARC','API') THEN
	inv.GRANDTOTAL*-1
ELSE
	inv.GRANDTOTAL
END AS "grandtotal",
pay.payamt as payamt,
CASE 
WHEN doc.docbasetype IN ('ARI') and inv.isselfservice='Y' THEN inv.GRANDTOTAL * -1
WHEN doc.docbasetype IN ('ARC','API') THEN
  abb.Amount * -1
ELSE
  abb.Amount * -1
END as AllocationAmt,
CASE WHEN doc.docbasetype IN ('ARC','API') THEN
  abb.overunderamt 
ELSE
abb.overunderamt 
END as overunderamt,
COALESCE(pay.datetrx, hdr.datetrx) as PaymentDate,
pay.documentno as paymentdoc,
pay.description as paymentdescription,
bank.name as bank_name,
bank.iban as bank_iban,
ps.payschedule AS payschedule,
(select inv2.documentno  from c_allocationhdr allhdr LEFT JOIN c_allocationline al2 on allhdr.c_allocationhdr_id=al2.c_allocationhdr_id 
	LEFT JOIN c_invoice inv2 on al2.c_invoice_id=inv2.c_invoice_id where abb.c_allocationhdr_id=allhdr.c_allocationhdr_id and inv.c_invoice_id<>al2.c_invoice_id limit 1
) as inv2_documentno,
cp.name as project_name,
c_currency.iso_code as c_currency_iso_code
from C_INVOICE inv
inner join c_currency on c_currency.c_currency_id = inv.c_currency_id
INNER JOIN c_doctype doc ON inv.c_doctype_id=doc.c_doctype_id
INNER JOIN C_BPartner bp ON inv.c_bpartner_id=bp.c_bpartner_id 
LEFT JOIN C_Project cp ON cp.C_Project_ID = inv.C_Project_ID
LEFT JOIN C_BPARTNER_LOCATION bpl ON bp.C_BPARTNER_ID  = bpl.C_BPARTNER_ID AND bpl.isbillto='Y'
LEFT JOIN C_LOCATION l ON bpl.C_LOCATION_ID = l.C_LOCATION_ID
LEFT JOIN C_DOCTYPE_TRL doctrl ON inv.c_doctype_id = doctrl.c_doctype_id and doctrl.ad_language=$P{LOCALE_CODE}
LEFT JOIN C_AllocationLine abb ON inv.c_invoice_id=abb.c_invoice_id 
LEFT JOIN C_Allocationhdr hdr ON hdr.C_Allocationhdr_ID = abb.C_Allocationhdr_ID 
 LEFT JOIN C_Payment pay ON abb.c_payment_id=pay.c_payment_id 
LEFT JOIN C_BANKaccount bank ON pay.c_bankaccount_id=bank.c_bankaccount_id
LEFT JOIN lit_rep_payschedule_v ps ON inv.c_invoice_id = ps.c_invoice_id
WHERE inv.C_DOCTYPE_ID=doc.C_DOCTYPE_ID AND inv.DOCSTATUS IN ('CO','CL')
and 
	CASE WHEN $P{IsCustomer} = 'Y' THEN bp.iscustomer = $P{IsCustomer}  ELSE 1=1
END
AND
	CASE WHEN $P{IsVendor} ='Y' THEN bp.isvendor=  $P{IsVendor} ELSE 1=1
END
AND
	CASE WHEN  $P{IsSOTrx} IS NOT NULL THEN inv.issotrx = $P{IsSOTrx} ELSE 1=1
END
AND doc.docbasetype IN ('ARI','ARC','API','APC')
AND inv.ad_client_id=  $P{AD_CLIENT_ID} 
AND inv.ad_org_id= $P{AD_Org_ID} 
AND 
CASE WHEN  $P{DateAcctFrom}::character <>'0' THEN inv.DATEINVOICED >=   $P{DateAcctFrom} OR ((COALESCE(pay.datetrx, hdr.datetrx)  >=   $P{DateAcctFrom} and payamt is null))
ELSE 1=1
END
AND  inv.DATEINVOICED <=  $P{DateAcctTo} 
AND 
  CASE
    WHEN  $P{C_BPartner_ID}  <>0 THEN bp.c_bpartner_id = $P{C_BPartner_ID} 
    ELSE
    1=1
  END
  union all
select 
(select (
	select (
		select coalesce ( sum (
	case when i.issotrx='N' then 
	invoiceopentodate2(i.c_invoice_id,ps.c_invoicepayschedule_id, $P{DateAcctFrom} )*-1
    else 
	invoiceopentodate2(i.c_invoice_id,ps.c_invoicepayschedule_id, $P{DateAcctFrom} ) END),0) as Openamt
from C_INVOICE I 
left join c_invoicepayschedule ps on i.c_invoice_id=ps.c_invoice_id
where i.c_bpartner_id= $P{C_BPartner_ID}  and DATEINVOICED <  $P{DateAcctFrom}  )+
           (Select (
              (select COALESCE(SUM(par.PAYAMT) + SUM(par.discountamt),0) as ARPayments
	      from C_PAYMENT  par, C_DOCTYPE doc  where doc.NAME ='AR Receipt'
              AND par.DOCSTATUS IN ('CO','CL')
	      AND  par.C_BPARTNER_ID =$P{C_BPartner_ID} AND par.C_DOCTYPE_ID=doc.C_DOCTYPE_ID
	      AND par.DATETRX < $P{DateAcctFrom} and par.isallocated='N' )
              ) as Payments)
     ) )as OpenningBal,
p.ad_org_id as ad_org_id,
p.datetrx as DateTrx ,
p.DOCUMENTNO,
p.isreceipt,
'prepaid' as name,
bpl.phone,
bpl.phone2,
bpl.fax,
bpl.email,
l.address1,
l.address2,
l.city,
bp.c_bpartner_id,
bp.NAME as "BPARTNER",
bp."ad_language"as ad_language,
l.postal,
l.postal_add,
doc.docbasetype,
p.description,
0 as grandtotal,
p.payamt as payamt,
CASE 
when i.c_invoice_id is  not null  then (al.amount)*-1
WHEN al.amount*-1 IS NULL  THEN p.payamt *-1
ELSE
(al.amount)*-1
END 
as AllocationAmt,
0 as overunderAmt,
p.datetrx as PaymentDate,
p.documentno as paymentdoc,
p.description as paymentdescription,
bank.name as bank_name,
bank.iban as bank_iban,
''as payschedule,
'' as inv2_documentno,
'' as project_name,
c_currency.iso_code as c_currency_iso_code
from c_allocationline al 
LEFT Join c_payment p on al.c_payment_id=p.c_payment_id and p.datetrx  >=  $P{DateAcctFrom} and p.datetrx  <=  $P{DateAcctTo}
LEFT JOIN c_doctype doc ON p.c_doctype_id=doc.c_doctype_id
LEFT  JOIN C_DOCTYPE_TRL doctrl ON p.c_doctype_id = doctrl.c_doctype_id and doctrl.ad_language=$P{LOCALE_CODE}
LEFT  JOIN C_BANKaccount bank on p.c_bankaccount_id=bank.c_bankaccount_id
left join c_invoice i on al.c_invoice_id=i.c_invoice_id
left join c_currency on c_currency.c_currency_id = p.c_currency_id
INNER JOIN C_BPartner bp ON i.c_bpartner_id=bp.c_bpartner_id 
LEFT  JOIN C_BPARTNER_LOCATION bpl ON bp.C_BPARTNER_ID  = bpl.C_BPARTNER_ID AND bpl.isbillto='Y'
LEFT  JOIN C_LOCATION l ON bpl.C_LOCATION_ID = l.C_LOCATION_ID
where 
CASE when i.c_invoice_id is  not null and i.dateinvoiced <=  $P{DateAcctFrom}  then
1=1
else
p.isallocated='N' 
END
and 
CASE WHEN $P{IsCustomer} = 'Y' THEN bp.iscustomer = $P{IsCustomer}   else 1=1
END
and 
case when $P{IsVendor} ='Y' then bp.isvendor=  $P{IsVendor} else 1=1
end
AND p.ad_client_id= $P{AD_CLIENT_ID} 
and
   CASE
    WHEN  $P{C_BPartner_ID}  <>0 then bp.c_bpartner_id = $P{C_BPartner_ID} 
  END
  -- TEST BELOW
  union all
  select 
  (select (
	select (
		select coalesce ( sum (
	case when i.issotrx='N' then 
	invoiceopentodate2(i.c_invoice_id,ps.c_invoicepayschedule_id, $P{DateAcctFrom} )*-1
    else 
	invoiceopentodate2(i.c_invoice_id,ps.c_invoicepayschedule_id, $P{DateAcctFrom} ) END),0) as Openamt
from C_INVOICE I 
left join c_invoicepayschedule ps on i.c_invoice_id=ps.c_invoice_id
where i.c_bpartner_id= $P{C_BPartner_ID}  and DATEINVOICED <  $P{DateAcctFrom}  )+
           (Select (
              (select COALESCE(SUM(par.PAYAMT) + SUM(par.discountamt),0) as ARPayments
	      from C_PAYMENT  par, C_DOCTYPE doc  where doc.NAME ='AR Receipt'
              AND par.DOCSTATUS IN ('CO','CL')
	      AND  par.C_BPARTNER_ID =$P{C_BPartner_ID} AND par.C_DOCTYPE_ID=doc.C_DOCTYPE_ID
	      AND par.DATETRX < $P{DateAcctFrom} and par.isallocated='N' )
              ))
     ) ) as OpenningBal,
p.ad_org_id as ad_org_id,
p.datetrx as DateTrx ,
p.DOCUMENTNO,
p.isreceipt,
'prepaid' as name,
bpl.phone,
bpl.phone2,
bpl.fax,
bpl.email,
l.address1,
l.address2,
l.city,
bp.c_bpartner_id,
bp.NAME as "BPARTNER",
bp."ad_language"as ad_language,
l.postal,
l.postal_add,
doc.docbasetype,
p.description,
0 as grandtotal,
p.payamt as payamt,
CASE 
when i.c_invoice_id is  not null  then (al.amount)*-1
WHEN al.amount*-1 IS NULL  THEN p.payamt *-1
ELSE
(al.amount)*-1
END 
as AllocationAmt,
0 as overunderAmt,
p.datetrx as PaymentDate,
p.documentno as paymentdoc,
p.description as paymentdescription,
bank.name as bank_name,
bank.iban as bank_iban,
''as payschedule,
'' as inv2_documentno,
'' as project_name,
c_currency.iso_code as c_currency_iso_code
  FROM rv_payment i
     JOIN c_payment p ON p.c_payment_id = i.c_payment_id and p.datetrx  >=  $P{DateAcctFrom} and p.datetrx  <=  $P{DateAcctTo}
     join c_currency on c_currency.c_currency_id = p.c_currency_id
     LEFT JOIN c_allocationline al ON al.c_payment_id=p.c_payment_id
     LEFT JOIN c_bp_bankaccount cb ON cb.c_bpartner_id = i.c_bpartner_id
     LEFT JOIN c_bankaccount ba ON ba.c_bankaccount_id = p.c_bankaccount_id
     LEFT JOIN c_doctype doc ON p.c_doctype_id=doc.c_doctype_id
LEFT  JOIN C_DOCTYPE_TRL doctrl ON p.c_doctype_id = doctrl.c_doctype_id and doctrl.ad_language=$P{LOCALE_CODE}
LEFT  JOIN C_BANKaccount bank on p.c_bankaccount_id=bank.c_bankaccount_id
INNER JOIN C_BPartner bp ON p.c_bpartner_id=bp.c_bpartner_id 
LEFT  JOIN C_BPARTNER_LOCATION bpl ON bp.C_BPARTNER_ID  = bpl.C_BPARTNER_ID AND bpl.isbillto='Y'
LEFT  JOIN C_LOCATION l ON bpl.C_LOCATION_ID = l.C_LOCATION_ID
  WHERE
	(
	(i.isallocated = 'N'::bpchar AND (i.docstatus = ANY (ARRAY['CO'::bpchar, 'CL'::bpchar])) AND p.gl_journalline_id IS NULL)
	or (i.isallocated = 'Y'::bpchar AND (i.docstatus = ANY (ARRAY['CO'::bpchar, 'CL'::bpchar])) AND p.gl_journalline_id IS NULL
	and i.c_invoice_id is null  and not exists (select al.C_Invoice_ID from C_AllocationHdr ah inner join c_allocationline al1 on ah.C_AllocationHdr_ID=al.C_AllocationHdr_ID
	where al.c_payment_id=i.c_payment_id and al.c_invoice_id is not null))
	)
	AND p.ad_client_id= $P{AD_CLIENT_ID} 
and
   CASE
    WHEN  $P{C_BPartner_ID}  <>0 then bp.c_bpartner_id = $P{C_BPartner_ID} 
  end
and p.C_Charge_ID is NULL
order by "BPARTNER",datetrx,documentno
) x]]>
	</queryString>
	<field name="openningbal" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.name" value="openningbal"/>
		<property name="com.jaspersoft.studio.field.label" value="openningbal"/>
	</field>
	<field name="ad_org_id" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.name" value="ad_org_id"/>
		<property name="com.jaspersoft.studio.field.label" value="ad_org_id"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="c_invoice"/>
	</field>
	<field name="datetrx" class="java.sql.Timestamp">
		<property name="com.jaspersoft.studio.field.name" value="datetrx"/>
		<property name="com.jaspersoft.studio.field.label" value="datetrx"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="c_invoice"/>
	</field>
	<field name="documentno" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="documentno"/>
		<property name="com.jaspersoft.studio.field.label" value="documentno"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="c_invoice"/>
	</field>
	<field name="issotrx" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="issotrx"/>
		<property name="com.jaspersoft.studio.field.label" value="issotrx"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="c_invoice"/>
	</field>
	<field name="name" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="name"/>
		<property name="com.jaspersoft.studio.field.label" value="name"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="c_doctype_trl"/>
	</field>
	<field name="phone" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="phone"/>
		<property name="com.jaspersoft.studio.field.label" value="phone"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="c_bpartner_location"/>
	</field>
	<field name="phone2" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="phone2"/>
		<property name="com.jaspersoft.studio.field.label" value="phone2"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="c_bpartner_location"/>
	</field>
	<field name="fax" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="fax"/>
		<property name="com.jaspersoft.studio.field.label" value="fax"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="c_bpartner_location"/>
	</field>
	<field name="email" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="email"/>
		<property name="com.jaspersoft.studio.field.label" value="email"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="c_bpartner_location"/>
	</field>
	<field name="address1" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="address1"/>
		<property name="com.jaspersoft.studio.field.label" value="address1"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="c_location"/>
	</field>
	<field name="address2" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="address2"/>
		<property name="com.jaspersoft.studio.field.label" value="address2"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="c_location"/>
	</field>
	<field name="city" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="city"/>
		<property name="com.jaspersoft.studio.field.label" value="city"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="c_location"/>
	</field>
	<field name="c_bpartner_id" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.name" value="c_bpartner_id"/>
		<property name="com.jaspersoft.studio.field.label" value="c_bpartner_id"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="c_bpartner"/>
	</field>
	<field name="BPARTNER" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="BPARTNER"/>
		<property name="com.jaspersoft.studio.field.label" value="BPARTNER"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="c_bpartner"/>
	</field>
	<field name="ad_language" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="ad_language"/>
		<property name="com.jaspersoft.studio.field.label" value="ad_language"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="c_bpartner"/>
	</field>
	<field name="postal" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="postal"/>
		<property name="com.jaspersoft.studio.field.label" value="postal"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="c_location"/>
	</field>
	<field name="postal_add" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="postal_add"/>
		<property name="com.jaspersoft.studio.field.label" value="postal_add"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="c_location"/>
	</field>
	<field name="docbasetype" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="docbasetype"/>
		<property name="com.jaspersoft.studio.field.label" value="docbasetype"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="c_doctype"/>
	</field>
	<field name="description" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="description"/>
		<property name="com.jaspersoft.studio.field.label" value="description"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="c_payment_v"/>
	</field>
	<field name="grandtotal" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.name" value="grandtotal"/>
		<property name="com.jaspersoft.studio.field.label" value="grandtotal"/>
	</field>
	<field name="payamt" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.name" value="payamt"/>
		<property name="com.jaspersoft.studio.field.label" value="payamt"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="c_payment"/>
	</field>
	<field name="allocationamt" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.name" value="allocationamt"/>
		<property name="com.jaspersoft.studio.field.label" value="allocationamt"/>
	</field>
	<field name="overunderamt" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.name" value="overunderamt"/>
		<property name="com.jaspersoft.studio.field.label" value="overunderamt"/>
	</field>
	<field name="paymentdate" class="java.sql.Timestamp">
		<property name="com.jaspersoft.studio.field.name" value="paymentdate"/>
		<property name="com.jaspersoft.studio.field.label" value="paymentdate"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="c_payment"/>
	</field>
	<field name="paymentdoc" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="paymentdoc"/>
		<property name="com.jaspersoft.studio.field.label" value="paymentdoc"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="c_payment"/>
	</field>
	<field name="paymentdescription" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="paymentdescription"/>
		<property name="com.jaspersoft.studio.field.label" value="paymentdescription"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="c_payment"/>
	</field>
	<field name="bank_name" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="bank_name"/>
		<property name="com.jaspersoft.studio.field.label" value="bank_name"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="c_bankaccount"/>
	</field>
	<field name="bank_iban" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="bank_iban"/>
		<property name="com.jaspersoft.studio.field.label" value="bank_iban"/>
		<property name="com.jaspersoft.studio.field.tree.path" value="c_bankaccount"/>
	</field>
	<field name="payschedule" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="payschedule"/>
		<property name="com.jaspersoft.studio.field.label" value="payschedule"/>
	</field>
	<field name="inv2_documentno" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="inv2_documentno"/>
		<property name="com.jaspersoft.studio.field.label" value="inv2_documentno"/>
	</field>
	<field name="project_name" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="project_name"/>
		<property name="com.jaspersoft.studio.field.label" value="project_name"/>
	</field>
	<field name="c_currency_iso_code" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="c_currency_iso_code"/>
		<property name="com.jaspersoft.studio.field.label" value="c_currency_iso_code"/>
	</field>
	<field name="datepattern" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="datepattern"/>
		<property name="com.jaspersoft.studio.field.label" value="datepattern"/>
	</field>
	<field name="timepattern" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.name" value="timepattern"/>
		<property name="com.jaspersoft.studio.field.label" value="timepattern"/>
	</field>
	<field name="header_image" class="byte[]">
		<property name="com.jaspersoft.studio.field.name" value="header_image"/>
		<property name="com.jaspersoft.studio.field.label" value="header_image"/>
	</field>
	<field name="footer_image" class="byte[]">
		<property name="com.jaspersoft.studio.field.name" value="footer_image"/>
		<property name="com.jaspersoft.studio.field.label" value="footer_image"/>
	</field>
	<sortField name="datetrx"/>
	<sortField name="documentno"/>
	<sortField name="paymentdate"/>
	<variable name="importoabbianto1" class="java.math.BigDecimal" resetType="Group" resetGroup="Documentno" calculation="Sum">
		<variableExpression><![CDATA[OR(new Date($F{paymentdate}.getTime()).before( $P{DateAcctTo}),new Date($F{paymentdate}.getTime()).equals( $P{DateAcctTo} )) ?$F{allocationamt} : new BigDecimal(0)]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="GRANDTOTAL1" class="java.math.BigDecimal" incrementType="Group" incrementGroup="Documentno" calculation="Sum">
		<variableExpression><![CDATA[$F{grandtotal}]]></variableExpression>
	</variable>
	<variable name="Returnamt" class="java.math.BigDecimal"/>
	<variable name="importoabbianto2" class="java.math.BigDecimal" resetType="Group" resetGroup="BPartner" calculation="Sum">
		<variableExpression><![CDATA[OR(new Date($F{paymentdate}.getTime()).before( $P{DateAcctTo}),new Date($F{paymentdate}.getTime()).equals( $P{DateAcctTo} )) ?$F{allocationamt} : new BigDecimal(0)]]></variableExpression>
		<initialValueExpression><![CDATA[0]]></initialValueExpression>
	</variable>
	<variable name="running" class="java.math.BigDecimal" resetType="Group" resetGroup="BPartner" incrementType="Group" incrementGroup="BPartner" calculation="Sum">
		<variableExpression><![CDATA[$V{running}.add($V{grandtotaldoc}).add($V{importoabbianto1})]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="grandtotaldoc" class="java.math.BigDecimal" resetType="Group" resetGroup="Documentno" incrementType="Group" incrementGroup="Documentno" calculation="Sum">
		<variableExpression><![CDATA[$F{grandtotal}]]></variableExpression>
	</variable>
	<variable name="TotaleDoc" class="java.math.BigDecimal" resetType="Group" resetGroup="Documentno" incrementType="Group" incrementGroup="Documentno" calculation="Sum">
		<variableExpression><![CDATA[$V{grandtotaldoc}.add($V{importoabbianto1} == null? new BigDecimal(0): $V{importoabbianto1})]]></variableExpression>
	</variable>
	<variable name="TotaleTOT" class="java.math.BigDecimal" resetType="Group" resetGroup="BPartner" incrementType="Group" incrementGroup="Documentno" calculation="Sum">
		<variableExpression><![CDATA[$V{grandtotaldoc}.add($V{importoabbianto1} == null? new BigDecimal(0): $V{importoabbianto1})]]></variableExpression>
		<initialValueExpression><![CDATA[$F{openningbal}]]></initialValueExpression>
	</variable>
	<variable name="openningbal1" class="java.math.BigDecimal" resetType="Column" calculation="Lowest">
		<variableExpression><![CDATA[$F{openningbal}]]></variableExpression>
	</variable>
	<variable name="Open2" class="java.math.BigDecimal" resetType="Column">
		<variableExpression><![CDATA[$V{openningbal1}]]></variableExpression>
		<initialValueExpression><![CDATA[new BigDecimal(0)]]></initialValueExpression>
	</variable>
	<variable name="grandtotal1" class="java.math.BigDecimal" incrementType="Group" incrementGroup="Documentno" calculation="Sum">
		<variableExpression><![CDATA[$F{grandtotal}]]></variableExpression>
	</variable>
	<group name="BPartner" isStartNewPage="true" isReprintHeaderOnEachPage="true" keepTogether="true">
		<groupExpression><![CDATA[$F{c_bpartner_id}]]></groupExpression>
		<groupHeader>
			<band height="71">
				<property name="com.jaspersoft.studio.unit.height" value="px"/>
				<textField pattern="#,##0.00;-#,##0.00">
					<reportElement x="415" y="37" width="72" height="16" uuid="28dfc46e-8c82-4b72-9812-35b9a6625d31"/>
					<box topPadding="0" leftPadding="2" bottomPadding="0" rightPadding="2"/>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{openningbal}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="302" y="37" width="113" height="16" uuid="4a96ad58-89c0-49dd-a6c2-e4f379c77e01"/>
					<box topPadding="0" leftPadding="2" bottomPadding="0" rightPadding="2">
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font fontName="SansSerif" size="10" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[str("BeginningBalance")]]></textFieldExpression>
				</textField>
				<textField textAdjust="ScaleFont" pattern="" isBlankWhenNull="true">
					<reportElement key="textField-1" positionType="Float" x="0" y="0" width="555" height="15" forecolor="#000000" uuid="c796c2fc-98dd-45f8-bb82-501fc2d851ce">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<box leftPadding="2" rightPadding="2">
						<topPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineColor="#000000"/>
						<rightPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Left" verticalAlignment="Middle" markup="styled">
						<font isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{BPARTNER}]]></textFieldExpression>
				</textField>
				<textField textAdjust="ScaleFont" isBlankWhenNull="true">
					<reportElement key="textField-3" positionType="Float" stretchType="RelativeToTallestObject" x="0" y="15" width="229" height="10" uuid="54846801-18b5-4e11-bd9a-7a6dd33ef514"/>
					<box leftPadding="2" rightPadding="2">
						<leftPen lineWidth="1.0"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font fontName="DejaVu Sans" size="7"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{address1}]]></textFieldExpression>
				</textField>
				<textField textAdjust="ScaleFont" isBlankWhenNull="true">
					<reportElement key="textField-6" positionType="Float" stretchType="RelativeToTallestObject" x="0" y="25" width="70" height="10" uuid="c37c92cb-8ffa-464b-939b-06e734928c6e">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<box leftPadding="2" rightPadding="2">
						<leftPen lineWidth="1.0"/>
						<bottomPen lineWidth="1.0"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font fontName="DejaVu Sans" size="7"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{postal}]]></textFieldExpression>
				</textField>
				<textField textAdjust="ScaleFont" isBlankWhenNull="true">
					<reportElement key="textField-7" positionType="Float" stretchType="RelativeToTallestObject" x="309" y="25" width="246" height="10" uuid="a1f50d22-6ff9-40a5-b4de-9e59c7e847b0">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<box leftPadding="2" rightPadding="2">
						<bottomPen lineWidth="1.0"/>
						<rightPen lineWidth="1.0"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font fontName="DejaVu Sans" size="7"/>
					</textElement>
					<textFieldExpression><![CDATA[T($F{phone}) + ' ' + T($F{phone2})]]></textFieldExpression>
				</textField>
				<textField textAdjust="ScaleFont" isBlankWhenNull="true">
					<reportElement key="textField-5" positionType="Float" stretchType="RelativeToTallestObject" x="70" y="25" width="159" height="10" uuid="ce36a449-ef97-4c35-8829-11d17028c794">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<box leftPadding="2" rightPadding="2">
						<bottomPen lineWidth="1.0"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font fontName="DejaVu Sans" size="7"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{city}]]></textFieldExpression>
				</textField>
				<textField textAdjust="ScaleFont" isBlankWhenNull="true">
					<reportElement key="staticText-2" positionType="Float" stretchType="RelativeToTallestObject" mode="Transparent" x="229" y="25" width="80" height="10" forecolor="#000000" backcolor="#FFFFFF" uuid="43f5ea59-d5c9-4cdb-881e-ab8408e84133">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<box leftPadding="2" rightPadding="2">
						<bottomPen lineWidth="1.0"/>
					</box>
					<textElement textAlignment="Left" verticalAlignment="Middle" rotation="None" markup="none">
						<font size="7"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<textFieldExpression><![CDATA[str("Phone")]]></textFieldExpression>
				</textField>
				<textField textAdjust="ScaleFont" isBlankWhenNull="true">
					<reportElement key="staticText-2" positionType="Float" stretchType="RelativeToTallestObject" mode="Transparent" x="229" y="15" width="80" height="10" forecolor="#000000" backcolor="#FFFFFF" uuid="15688a8f-45e1-46b3-90cd-dc3bfc077ec7">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<box leftPadding="2" rightPadding="2"/>
					<textElement textAlignment="Left" verticalAlignment="Middle" rotation="None" markup="none">
						<font size="7"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<textFieldExpression><![CDATA[str("EMail")]]></textFieldExpression>
				</textField>
				<textField textAdjust="ScaleFont" isBlankWhenNull="true">
					<reportElement positionType="Float" x="309" y="15" width="246" height="10" uuid="faf9eb83-49fa-4872-8fb5-67f3fc196348">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<box leftPadding="2" rightPadding="2">
						<rightPen lineWidth="1.0"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font fontName="DejaVu Sans" size="7"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{email}]]></textFieldExpression>
				</textField>
				<textField textAdjust="ScaleFont">
					<reportElement key="element-90" style="Header" x="0" y="58" width="70" height="13" uuid="3b0969b6-f0a3-4535-8fb5-005fb9d925d7">
						<property name="com.jaspersoft.studio.unit.y" value="px"/>
					</reportElement>
					<box leftPadding="2" rightPadding="2">
						<pen lineWidth="1.0"/>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Left" verticalAlignment="Middle" rotation="None" markup="none">
						<font fontName="SansSerif" size="7" isBold="true"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<textFieldExpression><![CDATA[str("DateDoc")]]></textFieldExpression>
				</textField>
				<textField textAdjust="ScaleFont">
					<reportElement key="element-90" style="Header" x="70" y="58" width="91" height="13" uuid="84f23887-fa1e-43e2-9d1b-a4527d4995c0"/>
					<box leftPadding="2" rightPadding="2">
						<pen lineWidth="1.0"/>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Left" verticalAlignment="Middle" rotation="None" markup="none">
						<font fontName="SansSerif" size="7" isBold="true"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<textFieldExpression><![CDATA[str("Description")]]></textFieldExpression>
				</textField>
				<textField textAdjust="ScaleFont">
					<reportElement key="element-90" style="Header" x="415" y="58" width="72" height="13" uuid="279fd996-62c7-4cd5-9143-6d0e63af60ce">
						<property name="com.jaspersoft.studio.unit.y" value="px"/>
					</reportElement>
					<box leftPadding="2" rightPadding="2">
						<pen lineWidth="1.0"/>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle" rotation="None" markup="none">
						<font fontName="SansSerif" size="7" isBold="true"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<textFieldExpression><![CDATA[str("Amt")]]></textFieldExpression>
				</textField>
				<textField textAdjust="ScaleFont">
					<reportElement key="element-90" style="Header" x="487" y="58" width="68" height="13" uuid="d2173da4-24bf-42fc-b590-48f3130d4467"/>
					<box leftPadding="2" rightPadding="2">
						<pen lineWidth="1.0"/>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle" rotation="None" markup="none">
						<font fontName="SansSerif" size="7" isBold="true"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<textFieldExpression><![CDATA[str("Balance")]]></textFieldExpression>
				</textField>
				<textField textAdjust="ScaleFont">
					<reportElement key="element-90" style="Header" x="161" y="58" width="254" height="13" uuid="670d6f63-55df-45b1-9f09-e131e255d161"/>
					<box leftPadding="2" rightPadding="2">
						<pen lineWidth="1.0"/>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="1.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Left" verticalAlignment="Middle" rotation="None" markup="none">
						<font fontName="SansSerif" size="7" isBold="true"/>
						<paragraph lineSpacing="Single"/>
					</textElement>
					<textFieldExpression><![CDATA[str("DocumentNo")]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement x="0" y="37" width="113" height="16" uuid="64968529-5e81-473e-a5ca-9c564b432187">
						<property name="com.jaspersoft.studio.unit.y" value="px"/>
					</reportElement>
					<box topPadding="0" leftPadding="2" bottomPadding="0" rightPadding="2">
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font fontName="SansSerif" size="10" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[str("C_Currency_ID") + ": " + $F{c_currency_iso_code}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
	</group>
	<group name="Documentno" keepTogether="true" preventOrphanFooter="true">
		<groupExpression><![CDATA[$F{documentno}]]></groupExpression>
		<groupHeader>
			<band height="16">
				<property name="com.jaspersoft.studio.unit.height" value="px"/>
				<printWhenExpression><![CDATA[!($F{name}.equals("prepaid" ))]]></printWhenExpression>
				<textField textAdjust="ScaleFont" pattern="" isBlankWhenNull="true">
					<reportElement key="textField" positionType="Float" stretchType="RelativeToTallestObject" x="161" y="0" width="254" height="16" uuid="2c32e329-3e9c-484b-8219-9089f9aeae08">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
						<property name="com.jaspersoft.studio.unit.width" value="px"/>
						<property name="com.jaspersoft.studio.unit.y" value="px"/>
					</reportElement>
					<box topPadding="0" leftPadding="2" bottomPadding="0" rightPadding="2">
						<pen lineWidth="0.25"/>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Left" verticalAlignment="Middle">
						<font fontName="SansSerif" size="10" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[T($F{documentno}) + ($F{project_name} == null? "":"  Prog: ") + T($F{project_name})]]></textFieldExpression>
				</textField>
				<textField textAdjust="ScaleFont" pattern="#,##0.00;-#,##0.00" isBlankWhenNull="true">
					<reportElement key="textField" positionType="Float" stretchType="RelativeToTallestObject" x="415" y="0" width="72" height="16" uuid="5225be71-a55d-4aa2-929e-78ae7e0254ac">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
						<property name="com.jaspersoft.studio.unit.width" value="px"/>
						<property name="com.jaspersoft.studio.unit.y" value="px"/>
					</reportElement>
					<box topPadding="0" leftPadding="2" bottomPadding="0" rightPadding="2">
						<pen lineWidth="0.25"/>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font fontName="SansSerif" size="10" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{grandtotal}]]></textFieldExpression>
				</textField>
				<textField textAdjust="ScaleFont">
					<reportElement positionType="Float" x="70" y="0" width="91" height="16" uuid="ba5f134b-bb64-4c8f-b57c-659e84157653">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
						<property name="com.jaspersoft.studio.unit.y" value="px"/>
					</reportElement>
					<box topPadding="0" leftPadding="2" bottomPadding="0" rightPadding="2">
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font fontName="SansSerif" size="10" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{name}=="prepaid" ? $P{RESOURCE}.getString("Prepaid_"+$F{ad_language}) :$F{name}]]></textFieldExpression>
				</textField>
				<textField textAdjust="ScaleFont" isBlankWhenNull="true">
					<reportElement x="0" y="0" width="70" height="16" uuid="c300911d-51bd-4094-90f5-a49c20993f2c">
						<property name="com.jaspersoft.studio.unit.width" value="px"/>
						<property name="com.jaspersoft.studio.unit.y" value="px"/>
					</reportElement>
					<box topPadding="0" leftPadding="2" bottomPadding="0" rightPadding="2">
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement verticalAlignment="Middle">
						<font fontName="SansSerif" size="10" isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$F{datetrx}]]></textFieldExpression>
					<patternExpression><![CDATA[$F{datepattern}]]></patternExpression>
				</textField>
				<textField textAdjust="ScaleFont" pattern="#,##0.00;-#,##0.00" isBlankWhenNull="true">
					<reportElement key="textField" positionType="Float" stretchType="RelativeToTallestObject" x="487" y="0" width="68" height="16" uuid="f73cb0d4-0760-4eee-bbb7-b1ea3b9f82df">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
						<property name="com.jaspersoft.studio.unit.width" value="px"/>
						<property name="com.jaspersoft.studio.unit.y" value="px"/>
					</reportElement>
					<box topPadding="0" leftPadding="2" bottomPadding="0" rightPadding="2">
						<pen lineWidth="0.25"/>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font fontName="SansSerif" size="10" isBold="true"/>
					</textElement>
				</textField>
			</band>
		</groupHeader>
		<groupFooter>
			<band height="16">
				<textField pattern="#,##0.00;-#,##0.00" isBlankWhenNull="false">
					<reportElement positionType="Float" x="487" y="0" width="68" height="16" forecolor="#0000CC" uuid="fd916840-521e-48a1-8919-eb109f556797"/>
					<box topPadding="0" leftPadding="2" bottomPadding="0" rightPadding="2">
						<pen lineColor="#030303"/>
						<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
						<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle">
						<font isBold="true"/>
					</textElement>
					<textFieldExpression><![CDATA[$V{TotaleTOT}.add($V{Open2})]]></textFieldExpression>
				</textField>
				<textField pattern="#,##0.00;-#,##0.00">
					<reportElement positionType="Float" x="415" y="0" width="72" height="16" uuid="709aaf2c-7013-4324-afaf-aaf2005bc8b3">
						<property name="com.jaspersoft.studio.unit.height" value="px"/>
					</reportElement>
					<box leftPadding="2">
						<topPen lineWidth="0.75"/>
					</box>
					<textElement textAlignment="Right" verticalAlignment="Middle"/>
					<textFieldExpression><![CDATA[$V{grandtotaldoc}.add($V{importoabbianto1} == null? new BigDecimal(0):$V{importoabbianto1} )]]></textFieldExpression>
				</textField>
			</band>
		</groupFooter>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="132">
			<image scaleImage="RetainShape" hAlign="Left" isUsingCache="true" onErrorType="Blank">
				<reportElement x="-20" y="0" width="595" height="80" uuid="f68e9f5c-fec2-453e-b71e-41ec3cf6ff4c"/>
				<imageExpression><![CDATA[$F{header_image}]]></imageExpression>
			</image>
			<staticText>
				<reportElement positionType="Float" x="0" y="90" width="555" height="18" uuid="734db688-e5ca-4d85-a9c9-6fdb5d659401"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[ESTRATTO CONTO]]></text>
			</staticText>
			<textField textAdjust="StretchHeight" pattern="dd/MM/yyyy" isBlankWhenNull="true">
				<reportElement key="textField-2" positionType="Float" x="0" y="108" width="555" height="18" forecolor="#000000" uuid="59cbfc74-864f-4e17-a32a-2e6e958c5b2b"/>
				<box>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[new SimpleDateFormat($F{datepattern}).format($P{DateAcctFrom}) + "  - " + new SimpleDateFormat($F{datepattern}).format($P{DateAcctTo})]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<detail>
		<band height="16">
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
			<printWhenExpression><![CDATA[AND($F{allocationamt}!=null,(new Date($F{paymentdate}.getTime()).before( $P{DateAcctTo})))]]></printWhenExpression>
			<textField textAdjust="ScaleFont" pattern="#,##0.00;-#,##0.00" isBlankWhenNull="true">
				<reportElement style="EasyRead" positionType="Float" x="415" y="0" width="72" height="16" uuid="eb3f8e93-9b96-4016-b69d-434f4eef630e">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="46f7af20-3217-48ff-8c73-9e211d64ce8d"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
				</reportElement>
				<box leftPadding="2" rightPadding="2">
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="SansSerif" size="10" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{allocationamt}]]></textFieldExpression>
			</textField>
			<textField textAdjust="ScaleFont" isBlankWhenNull="true">
				<reportElement key="textField" style="EasyRead" positionType="Float" x="70" y="0" width="91" height="16" uuid="9a29f262-1c66-4609-9187-847c72ff5994">
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
				</reportElement>
				<box leftPadding="2">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" size="10"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{paymentdoc}== null ? "ABBINAMENTO" : 
"PAGAMENTO"]]></textFieldExpression>
			</textField>
			<textField textAdjust="ScaleFont" pattern="dd-MM-yyyy" isBlankWhenNull="true">
				<reportElement key="textField" style="EasyRead" positionType="Float" x="0" y="0" width="70" height="16" uuid="189afc3b-f8c6-4fde-8ea0-d7c6a2042b92">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
				</reportElement>
				<box leftPadding="2">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement verticalAlignment="Middle">
					<font fontName="SansSerif" size="10"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{paymentdate}]]></textFieldExpression>
			</textField>
			<textField textAdjust="ScaleFont" isBlankWhenNull="true">
				<reportElement style="EasyRead" positionType="Float" x="161" y="0" width="254" height="16" uuid="402a05ac-5567-4a00-a72c-84d94875305d">
					<property name="com.jaspersoft.studio.spreadsheet.connectionID" value="e280b7e5-6ab4-4a67-b318-8e99c7579be5"/>
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
				</reportElement>
				<box leftPadding="2"/>
				<textElement verticalAlignment="Middle" markup="none">
					<font fontName="SansSerif" size="8"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{paymentdoc}==null ? " DOC. NUM.  " + T($F{inv2_documentno}) : 
"DOC. PAG. "+T($F{paymentdoc})+" - " +T($F{paymentdescription})  + ' ' + T($F{bank_name}) + "  " +"  "+$F{payamt}]]></textFieldExpression>
			</textField>
			<textField textAdjust="ScaleFont" pattern="#,##0.00;-#,##0.00" isBlankWhenNull="true">
				<reportElement key="textField" style="EasyRead" positionType="Float" stretchType="RelativeToTallestObject" x="487" y="0" width="68" height="16" uuid="83119b50-d34b-4449-b5c6-1dc8e09dd062">
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="com.jaspersoft.studio.unit.y" value="px"/>
				</reportElement>
				<box topPadding="0" leftPadding="2" bottomPadding="0" rightPadding="2">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<leftPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<bottomPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
					<rightPen lineWidth="0.0" lineStyle="Solid" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="SansSerif" size="10" isBold="true"/>
				</textElement>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="96">
			<image scaleImage="RetainShape" hAlign="Left" vAlign="Bottom" isUsingCache="true" onErrorType="Blank">
				<reportElement positionType="FixRelativeToBottom" x="-20" y="16" width="595" height="80" isRemoveLineWhenBlank="true" uuid="0b948d04-de67-4f2e-b923-1e895bf65154">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="com.jaspersoft.studio.unit.x" value="px"/>
					<property name="com.jaspersoft.studio.unit.y" value="px"/>
				</reportElement>
				<imageExpression><![CDATA[$F{footer_image}]]></imageExpression>
			</image>
			<textField>
				<reportElement positionType="FixRelativeToBottom" x="0" y="6" width="260" height="10" uuid="269cf5e9-5394-4ca4-8ccd-90c047045f57"/>
				<textElement textAlignment="Left" verticalAlignment="Bottom">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA["RP.821 - " + str("DatePrinted") + ": " + DATEFORMAT(NOW( ),$F{datepattern} + " " + $F{timepattern})]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement positionType="FixRelativeToBottom" x="510" y="6" width="45" height="10" uuid="f3bd354a-4718-4068-aff5-7b20e6642a4b"/>
				<box leftPadding="2" rightPadding="2"/>
				<textElement textAlignment="Right" verticalAlignment="Bottom">
					<font size="7"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{PAGE_NUMBER}]]></textFieldExpression>
			</textField>
		</band>
	</pageFooter>
	<summary>
		<band height="30" splitType="Stretch">
			<textField textAdjust="ScaleFont" pattern="#,##0.00">
				<reportElement positionType="Float" x="98" y="15" width="180" height="15" uuid="9f1b2bc0-200f-46cf-a07f-b7eb5c31c376">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="com.jaspersoft.studio.unit.x" value="px"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
				</reportElement>
				<box leftPadding="2" rightPadding="2">
					<pen lineWidth="0.5" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="SansSerif" size="10" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{GRANDTOTAL1}.abs()]]></textFieldExpression>
			</textField>
			<textField textAdjust="ScaleFont" pattern="#,##0.00">
				<reportElement positionType="Float" x="278" y="15" width="155" height="15" uuid="87128d8e-7be6-48b0-98e0-01d6ac387d78"/>
				<box leftPadding="2" rightPadding="2">
					<pen lineWidth="0.5" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="SansSerif" size="10" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{importoabbianto2} == null ? 0 : $V{importoabbianto2}.abs()]]></textFieldExpression>
			</textField>
			<textField textAdjust="ScaleFont" pattern="#,##0.00" isBlankWhenNull="true">
				<reportElement positionType="Float" x="433" y="15" width="122" height="15" uuid="e70f471a-3a5e-4ba5-aceb-97772b5f3233">
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
				</reportElement>
				<box leftPadding="2" rightPadding="2">
					<pen lineWidth="0.5" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="SansSerif" size="10" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$V{TotaleTOT}.add($F{openningbal})]]></textFieldExpression>
			</textField>
			<textField textAdjust="ScaleFont">
				<reportElement key="textField" style="Header" positionType="Float" x="433" y="0" width="122" height="15" uuid="f781b9ab-7988-4368-b901-f8210f96196d"/>
				<box leftPadding="2" rightPadding="2">
					<pen lineWidth="0.5" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="SansSerif" size="10" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[str("EndingBalance")]]></textFieldExpression>
			</textField>
			<textField textAdjust="ScaleFont">
				<reportElement key="textField" style="Header" positionType="Float" x="278" y="0" width="155" height="15" uuid="7cc5e50f-6dcc-4b61-a472-666d4917e44a"/>
				<box leftPadding="2" rightPadding="2">
					<pen lineWidth="0.5" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="SansSerif" size="10" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[str("LIT_RP_821_TotalPayments")]]></textFieldExpression>
			</textField>
			<textField textAdjust="ScaleFont">
				<reportElement key="textField" style="Header" positionType="Float" x="0" y="0" width="98" height="15" uuid="2a8db6f2-096e-4ae9-bd0f-73066210e3d4"/>
				<box leftPadding="2" rightPadding="2">
					<pen lineWidth="0.5" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="SansSerif" size="10" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[str("BeginningBalance")]]></textFieldExpression>
			</textField>
			<textField textAdjust="ScaleFont">
				<reportElement key="textField" style="Header" positionType="Float" x="98" y="0" width="180" height="15" uuid="300912d9-58eb-448a-a14c-a2c5dbeac580"/>
				<box leftPadding="2" rightPadding="2">
					<pen lineWidth="0.5" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="SansSerif" size="10" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[str("LIT_RP_821_TotalDocuments")]]></textFieldExpression>
			</textField>
			<textField textAdjust="ScaleFont" pattern="#,##0.00">
				<reportElement positionType="Float" x="0" y="15" width="98" height="15" uuid="0e3533de-f4eb-428c-bdba-a8f3eba1c56c">
					<property name="com.jaspersoft.studio.unit.width" value="px"/>
					<property name="com.jaspersoft.studio.unit.x" value="px"/>
					<property name="com.jaspersoft.studio.unit.height" value="px"/>
				</reportElement>
				<box leftPadding="2" rightPadding="2">
					<pen lineWidth="0.5" lineColor="#000000"/>
				</box>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font fontName="SansSerif" size="10" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{openningbal}]]></textFieldExpression>
			</textField>
		</band>
	</summary>
</jasperReport>
